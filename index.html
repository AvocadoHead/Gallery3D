<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Floating Cloud Gallery</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-start: #f8fbff;
      --bg-end: #eef2ff;
      --glow: rgba(80, 132, 255, 0.25);
      --panel: rgba(255, 255, 255, 0.7);
      --text: #1d2a3a;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      color: var(--text);
      overflow: hidden;
      background: radial-gradient(circle at 20% 20%, #ffffff 0%, #f4f7ff 25%, #eef2ff 55%, #e9edff 100%);
    }

    .hud {
      position: fixed;
      top: 16px;
      left: 16px;
      padding: 12px 16px;
      background: var(--panel);
      border-radius: 14px;
      backdrop-filter: blur(8px);
      box-shadow: 0 10px 35px rgba(24, 62, 122, 0.12);
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 5;
    }

    .hud .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: linear-gradient(135deg, #7dd3fc, #60a5fa);
      box-shadow: 0 0 0 6px rgba(124, 181, 255, 0.35);
    }

    .hud strong { font-weight: 600; }

    #scene-container {
      position: fixed;
      inset: 0;
      overflow: hidden;
    }

    .tile {
      width: 168px;
      height: 168px;
      border-radius: 24px;
      background: linear-gradient(135deg, #f8fbff, #e7edff);
      box-shadow:
        0 10px 25px rgba(51, 94, 186, 0.12),
        0 0 0 1px rgba(255, 255, 255, 0.35),
        0 0 25px var(--glow);
      transition: transform 0.35s ease, box-shadow 0.35s ease, filter 0.35s ease, opacity 0.35s ease;
      pointer-events: auto;
      will-change: transform;
      overflow: hidden;
      opacity: 0;
      transform: scale(0.94);
      backface-visibility: hidden;
      transform-style: preserve-3d;
    }

    .tile.loaded {
      opacity: 1;
      transform: scale(1);
    }

    .tile img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 24px;
      filter: saturate(0.92);
      transition: filter 0.3s ease, opacity 0.35s ease;
      opacity: 0.85;
    }

    .tile::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.4), rgba(255,255,255,0));
      opacity: 0;
      transition: opacity 0.35s ease;
    }

    .tile:hover {
      transform: scale(1.08) translateZ(30px);
      box-shadow:
        0 16px 40px rgba(51, 94, 186, 0.18),
        0 0 0 1px rgba(255, 255, 255, 0.6),
        0 0 40px rgba(96, 165, 250, 0.3);
      filter: saturate(1.08);
    }

    .tile:hover::after { opacity: 1; }

    #viewer {
      position: fixed;
      inset: 0;
      background: rgba(240, 245, 255, 0.7);
      backdrop-filter: blur(18px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    #viewer.active { display: flex; }

    #viewer img {
      max-width: min(90vw, 1200px);
      max-height: 90vh;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(32, 64, 128, 0.35);
      background: #fff;
    }

    #viewer .close {
      position: fixed;
      top: 18px;
      right: 18px;
      background: #fff;
      border: none;
      padding: 12px 16px;
      border-radius: 14px;
      box-shadow: 0 12px 30px rgba(44, 87, 176, 0.25);
      cursor: pointer;
      color: #1b2d4a;
      font-weight: 600;
      letter-spacing: 0.01em;
    }

    .loading {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      z-index: 4;
      pointer-events: none;
      color: #4a607c;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      transition: opacity 0.45s ease;
    }

    .loading.done {
      opacity: 0;
    }

    .launch-preview {
      position: fixed;
      border-radius: 24px;
      box-shadow:
        0 18px 50px rgba(46, 83, 159, 0.28),
        0 0 0 1px rgba(255, 255, 255, 0.6);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      z-index: 12;
      pointer-events: none;
      transform-origin: top left;
      transition: transform 0.55s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.55s ease;
      opacity: 0.95;
    }
  </style>
</head>
<body>
  <div class="hud">
    <div class="dot"></div>
    <div>
      <strong>Floating Cloud</strong><br>
      Drag to pan · Scroll to zoom · Click to open
    </div>
  </div>
  <div id="scene-container"></div>
  <div id="viewer">
    <button class="close" aria-label="Close">Close</button>
    <img alt="Artwork" />
  </div>
  <div class="loading">Loading artworks…</div>

  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
      }
    }
  </script>

  <script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import { CSS3DRenderer, CSS3DObject } from 'three/addons/renderers/CSS3DRenderer.js';

    const rawLinks = [
      "https://drive.google.com/file/d/1dIqrswjsCHoktMCdeGJ0GMgEd6K7EzVf/view?usp=drive_link",
      "https://drive.google.com/file/d/1b-cLwlDgBOzYEyP83u5un-bVRgty5pP5/view?usp=drive_link",
      "https://drive.google.com/file/d/1XLTys10VbfYx3rFIZkvdXPEDdt8VFkOs/view?usp=drive_link",
      "https://drive.google.com/file/d/1ag-sRtn2snQkCQKIQd47VMP0YVvrBNFF/view?usp=drive_link",
      "https://drive.google.com/file/d/1RAlv9kgNShhag-fXqBbwtVRHd7rHVLqd/view?usp=drive_link",
      "https://drive.google.com/file/d/1oBao77n5MXaZigY0xidHx9fvzlHvHnzq/view?usp=drive_link",
      "https://drive.google.com/file/d/1i3EF6dh2o4vdZj7L2WDVtrLJ2okgplkn/view?usp=drive_link",
      "https://drive.google.com/file/d/1vbRUbx_8sNrnoOHOiX3kWFQ0y9R6_ji8/view?usp=drive_link",
      "https://drive.google.com/file/d/1CYGuuWyLDEAacrqgmOud1AWBcPMFG-Tt/view?usp=drive_link",
      "https://drive.google.com/file/d/1k9W4mFR2vpxSsGun6MmWznaiKrVypYs-/view?usp=drive_link",
      "https://drive.google.com/file/d/1Yuutr1x2lnFiDhsw4bFg9gl-y19ntS1U/view?usp=drive_link",
      "https://drive.google.com/file/d/1Z75YDRQaKJ_-CaHtw2uU708nTvqxb5Y4/view?usp=drive_link",
      "https://drive.google.com/file/d/1DYSxTDmM7x9_i2NiloM9B-GnnK7okn0I/view?usp=drive_link",
      "https://drive.google.com/file/d/1zNr7V4XeDq8C0WhB5gQmC6x87S6b97Fh/view?usp=drive_link",
      "https://drive.google.com/file/d/1bTWBRVW8RlJjTAf77RyXMhWmjFs8pR2s/view?usp=drive_link",
      "https://drive.google.com/file/d/1TTJadEjAbn4GnSbhadUKGzoFqrNyKRuV/view?usp=drive_link",
      "https://drive.google.com/file/d/1ym24g7UgZXD6vHyROJ2CBh1oFY-ZlqzU/view?usp=drive_link",
      "https://drive.google.com/file/d/1NoJ5qM1NmwzzK87JZ4JY0lM4lTCa4_EW/view?usp=drive_link",
      "https://drive.google.com/file/d/1E5mePQuZkHPSz7e3fvdFZfIDZHUCxqxM/view?usp=drive_link",
      "https://drive.google.com/file/d/1NkQCVIL42lriLHsK9JLA9avh22opAsdN/view?usp=drive_link",
      "https://drive.google.com/file/d/1SDL4oS6AXAb1ElmJRmR1z3KjhVvtJEuZ/view?usp=drive_link",
      "https://drive.google.com/file/d/18K7NowtSxytruYa1XNv7SAhNusTGRhxK/view?usp=drive_link",
      "https://drive.google.com/file/d/1GosSmTB_UZuWf_vXLVPotGPIJ_QYQeON/view?usp=drive_link",
      "https://drive.google.com/file/d/1uBlmkZzufwRCU8wU8pe4sOn5pKsngG8n/view?usp=drive_link",
      "https://drive.google.com/file/d/1CgpTrsDbIKdW9jsdAyOvSkH5UE0xj8st/view?usp=drive_link",
      "https://drive.google.com/file/d/13Hu3YgQNGXSID1LYDsV9Zi_DpmRKIwdc/view?usp=drive_link",
      "https://drive.google.com/file/d/1i-pnGZcQtGB_bFRhbUBXJgUxtODegcf8/view?usp=drive_link",
      "https://drive.google.com/file/d/1KuxtRW8fpOu7Re1LD3JXKqZgjbpEc-uq/view?usp=drive_link",
      "https://drive.google.com/file/d/1lwOdbmPOsaSDOKaanC98HFpoN7K8dvfB/view?usp=drive_link",
      "https://drive.google.com/file/d/1ho6vkT1yO-9ZCiCxDXjvt0LJUeeNBzLE/view?usp=drive_link",
      "https://drive.google.com/file/d/1cc_5eIv0Kw9IQ4M_SYAlfLjyJXHgC09K/view?usp=drive_link",
      "https://drive.google.com/file/d/1oOkPp6xQ2kl9lFbY3Wdn9_Ey_52Qi4EA/view?usp=drive_link",
      "https://drive.google.com/file/d/1zy9-DFe-sgmRASHof1Eg2tLACU1XiCaA/view?usp=drive_link",
      "https://drive.google.com/file/d/1j_tRB8pcZe9yXJn9HniNofggpGyLMTnn/view?usp=drive_link",
      "https://drive.google.com/file/d/17YPPcET3rAy9yA3PwO8Il9jDEvoMe6xf/view?usp=drive_link",
      "https://drive.google.com/file/d/1TbC51Lw5GFq3oK-8WLXLK8oLg2kpbmbr/view?usp=drive_link",
      "https://drive.google.com/file/d/1xJENuwy-XBhfcFAfjxfs9oP6GEecds5o/view?usp=drive_link",
      "https://drive.google.com/file/d/1EIkmqcoSdBP7mfaKBvyqsAf3FfsS2Qgx/view?usp=drive_link",
      "https://drive.google.com/file/d/1-XAW96BAmHo0q-82cTkAyfryfh6hFdjR/view?usp=drive_link",
      "https://drive.google.com/file/d/1nRWE7rGCkxaB2a8JQGGS-HZUsMjE2BaH/view?usp=drive_link",
      "https://drive.google.com/file/d/1J3jFWZVBCHMW5s1Fp_xa1sAzc9ia-sG9/view?usp=drive_link",
      "https://drive.google.com/file/d/1Fswm-SH-Fm9QZEN5d-F-p0rHn_6ZfSpv/view?usp=drive_link",
      "https://drive.google.com/file/d/16Kb2CcvOLooRNycycPu9dGUkMP1QsFxd/view?usp=drive_link",
      "https://drive.google.com/file/d/1uxpGfhzd7nOzubSnDX_zAxvJ8p_6B1K0/view?usp=drive_link",
      "https://drive.google.com/file/d/197cob3XDMRMMxWL51r3hcKrUnBganrWN/view?usp=drive_link",
      "https://drive.google.com/file/d/124yvpR4cKH8_Ym2Y34Dc89bGSsMBLgwB/view?usp=drive_link",
      "https://drive.google.com/file/d/1NfVqmNKovjR0IcNekU1-okUSRJWy351w/view?usp=drive_link",
      "https://drive.google.com/file/d/1xwUtZ5Ks49PxYexlKWLqsnkBBNaYIQce/view?usp=drive_link",
      "https://drive.google.com/file/d/1p7Q2C3EnQMfJtXb4PT5FLZgxLmJ-R57G/view?usp=drive_link",
      "https://drive.google.com/file/d/1iLpGssMibyEg2CboinsllzbwMcfJggzU/view?usp=drive_link",
      "https://drive.google.com/file/d/1S9ZHTRjFwlsFE-uAMK0E2DsX45KZ65UG/view?usp=drive_link",
      "https://drive.google.com/file/d/1069cCuv2xpl3rRmgOl-X2C33lUlApgs9/view?usp=drive_link",
      "https://drive.google.com/file/d/1ba3GFHM-vOxom2aKGvKDGa39GnpHPCyn/view?usp=drive_link",
      "https://drive.google.com/file/d/1tH5rVisJfKXQkOLinNbbiuO125N6Q6rv/view?usp=drive_link",
      "https://drive.google.com/file/d/1sdLn3vVU3HkC1EcYH0imm8Ang9puzGfN/view?usp=drive_link",
      "https://drive.google.com/file/d/1_XPooJtTiP8WtET1Ptr0u0Yd4R7LpceS/view?usp=drive_link",
      "https://drive.google.com/file/d/1iG6Qd42JakXy2zfS6tIftQ2kLnqNdH19/view?usp=drive_link",
      "https://drive.google.com/file/d/11Uzj_X87QCA1sd5ci8feAuLBCecYI8eD/view?usp=drive_link",
      "https://drive.google.com/file/d/1Q-o6UD8TEBdf878zJrUkPBo8dY_Bv1tK/view?usp=drive_link",
      "https://drive.google.com/file/d/1f5tTu1g5To1LP-n_V1Yl1L2mA5V7GZ1Z/view?usp=drive_link",
      "https://drive.google.com/file/d/1Q6wEtR3LSoancYmQB1vjCnvE97zSt_vr/view?usp=drive_link",
      "https://drive.google.com/file/d/1gTaWbxXnqk8YNqjUlCvVTALXn3RXyLqj/view?usp=drive_link",
      "https://drive.google.com/file/d/1D4bswVMFyJ1U2j5ggpbkYFuMyKarjw7s/view?usp=drive_link",
      "https://drive.google.com/file/d/19WvYgH6mXSlJ1s8tBV9oQJKWfb62lbzw/view?usp=drive_link",
      "https://drive.google.com/file/d/11nDYAiuBXdBS-YJ9VKovYCnazmCh8wMg/view?usp=drive_link",
      "https://drive.google.com/file/d/1SE8tX2puBtgSGhgqWrug5jNDbZj4153f/view?usp=drive_link",
      "https://drive.google.com/file/d/19C10zqTXsJU7HJj0mBAdzuiLQa53OhWD/view?usp=drive_link",
      "https://drive.google.com/file/d/1JAag_sHi9dzNXEfSGvOW8ygMe5NKx3q1/view?usp=drive_link",
      "https://drive.google.com/file/d/10crBxq16SLs85_EmX5jzP8h3VnXqtskS/view?usp=drive_link",
      "https://drive.google.com/file/d/1cmA9nsLNfFnRuCRgCd_mmoopJkHOfWwD/view?usp=drive_link",
      "https://drive.google.com/file/d/1U2jAqqXVqfm0wJJxms780Evd64TBxSi2/view?usp=drive_link",
      "https://drive.google.com/file/d/1K3OFOmIVQjd17HKr5caDlZiRGswJUWQk/view?usp=drive_link",
      "https://drive.google.com/file/d/1CoqHd900-nDP0_8ouV8TIXSoBkwXgJYV/view?usp=drive_link",
      "https://drive.google.com/file/d/1wl7Embnc7XZhVUG0VMtDMrNzrQZeV-kF/view?usp=drive_link",
      "https://drive.google.com/file/d/1ideGq-j9ZwXz_Ut7JUsmQRJtqufzLIUD/view?usp=drive_link",
      "https://drive.google.com/file/d/1Pilh3Z0yvl2I0qyFrrDN4afbJ-VY1Zsc/view?usp=drive_link",
      "https://drive.google.com/file/d/1xut7RGMDmd4P6HzG8miFaNqpmfV3AEwt/view?usp=drive_link",
      "https://drive.google.com/file/d/1tAduPH5GixXUW6km8s95TGEGzjxUt42g/view?usp=drive_link",
      "https://drive.google.com/file/d/1zm0zsl3pdUdCHm2pMDj0pAGJ6oWoTBjQ/view?usp=drive_link",
      "https://drive.google.com/file/d/1zPFjWx5qWGH3Q07RlpqRLwJ49NYhvdet/view?usp=drive_link",
      "https://drive.google.com/file/d/15jK6xzxh2BNO-T7PmbNBm_8_ahBChEbe/view?usp=drive_link",
      "https://drive.google.com/file/d/1b0wxa4OMTnRdnAshHjCv3qRI80mI1ihD/view?usp=drive_link",
      "https://drive.google.com/file/d/12clA6iydxba8frWLqK7DH5TDRg-izN88/view?usp=drive_link",
      "https://drive.google.com/file/d/125TO6KjF6P6T6Vt49QqGOvW4s-zZL6rZ/view?usp=drive_link",
      "https://drive.google.com/file/d/1pPn_3PZVR-hVKoNx_esMbCuZhpHsg0_W/view?usp=drive_link",
      "https://drive.google.com/file/d/1WGHw1fNT1_06E2VqEORIa027lSemDIgx/view?usp=drive_link",
      "https://drive.google.com/file/d/1xKHz5_esL6hIhVZYx849U0gp_Mf6mkWT/view?usp=drive_link",
      "https://drive.google.com/file/d/11xDKKjYbRODBTZ5x40TBw1flVte3T-zu/view?usp=drive_link",
      "https://drive.google.com/file/d/19Bcr3UnD61_-KQEwEgrSKZri-4sXZMBV/view?usp=drive_link",
      "https://drive.google.com/file/d/16mI5Hd53YFQh1or-jxSRgQ7VlvAr1D6Q/view?usp=drive_link",
      "https://drive.google.com/file/d/1gjIkpNJI4JY9vpu0lNLdciylKYIzpMtx/view?usp=drive_link",
      "https://drive.google.com/file/d/1PE_WZBJTE3fUGe0xZb3hKRwyA8yTmXkl/view?usp=drive_link",
      "https://drive.google.com/file/d/1DQI-VbiiavAxSCaB6UwHNyR_FUj5tSGa/view?usp=drive_link",
      "https://drive.google.com/file/d/1A9PYTLNZ5aUKsvmCyIOCjxslOMDyydQD/view?usp=drive_link",
      "https://drive.google.com/file/d/19NaC5IQpIopanuPxWieVGsHLaMWsH9cz/view?usp=drive_link",
      "https://drive.google.com/file/d/1y7gWZzcqRmTrN25LksxiJfZWWVgzbbd8/view?usp=drive_link",
      "https://drive.google.com/file/d/16KnbVnIxMIGJihqAzQfuFsuhJJjyDyd8/view?usp=drive_link",
      "https://drive.google.com/file/d/12rkPw7AvuIIFLsR-sUF-UjXetq_Or-DJ/view?usp=drive_link",
      "https://drive.google.com/file/d/1mBR-PgKgRZYnkyzDVL_ytxuDXAc-PnR2/view?usp=drive_link",
      "https://drive.google.com/file/d/1RDcv-LqbfdiM4uSZLBw1SLk7w0B9DHbj/view?usp=drive_link",
      "https://drive.google.com/file/d/13g04Ujm2E7CJt1TB0DvOGnaHk6NkK7D8/view?usp=drive_link",
      "https://drive.google.com/file/d/1CHMNIqrAyv7Zln-3ewyEa8GuGVrXXqYb/view?usp=drive_link",
      "https://drive.google.com/file/d/1rg0Zkec7Plp-v5AXLDxbIAGN4mqBgnk8/view?usp=drive_link",
      "https://drive.google.com/file/d/11LHx2xpQHoSZTjEaXl3LT0u7G_lYqOoB/view?usp=drive_link",
      "https://drive.google.com/file/d/1S-I5u4txMvz5QEeoSo2zfEl-dACI505g/view?usp=drive_link",
      "https://drive.google.com/file/d/15s7z1xducu2NqGQy9HFq_tgcRTuW9awx/view?usp=drive_link",
      "https://drive.google.com/file/d/1sNpmSkNomiDRUsip-42N65z2Vg3Qy1Fd/view?usp=drive_link",
      "https://drive.google.com/file/d/1hDKZs8p0bTXSWyJigSxGiBS4cDz2R0a_/view?usp=drive_link",
      "https://drive.google.com/file/d/1ygfWRgOxo1ydMXtVUFAXCmqROOVSiLYA/view?usp=drive_link",
      "https://drive.google.com/file/d/1vOSzMCAUCa0keTEa223YkuMDVbZ8T6J0/view?usp=drive_link",
      "https://drive.google.com/file/d/1x0cTpCvDS_EyZKXmnqC6kCIMyGvoKYl1/view?usp=drive_link",
      "https://drive.google.com/file/d/1I3eGuc8w3gc_JGTQ9z4QCuMU5mEcBm1w/view?usp=drive_link",
      "https://drive.google.com/file/d/1uuIbNl9LmflKFHl9jvU5R80nEJrhtG6Q/view?usp=drive_link",
      "https://drive.google.com/file/d/1oZrPAuej0VcnjPuoDAmugfPjdqqAlHqJ/view?usp=drive_link",
      "https://drive.google.com/file/d/19N2dOXXyjrMxOCNmt-5xEFFGtBjmQaGL/view?usp=drive_link",
      "https://drive.google.com/file/d/1X2Ml7eVvjM2Wwc4P8NhzvXOk0FCVAGz7/view?usp=drive_link",
      "https://drive.google.com/file/d/1SxDGsedMguL7R_D4kNZxM8fJFZBa8Qyj/view?usp=drive_link",
      "https://drive.google.com/file/d/1j99vw_0SK002no3DiBBoutUr0kZX2PEs/view?usp=drive_link",
      "https://drive.google.com/file/d/1mgnhJlXjJcPAoRQ3YC0a2wsuqgh_aLRZ/view?usp=drive_link",
      "https://drive.google.com/file/d/1fm706YTI5Sb9ncVZeAGy8hhtJdPfAdNR/view?usp=drive_link",
      "https://drive.google.com/file/d/1RCa5vrW8GYMlLfTeHeqPIvQr2GFk73Rk/view?usp=drive_link",
      "https://drive.google.com/file/d/1C06Z3VBM2zi6M7oLS854AcFRMWqEHHzH/view?usp=drive_link",
      "https://drive.google.com/file/d/1XlIcMpYInt-igq8xJyKWbjA3uodBHKI0/view?usp=drive_link",
      "https://drive.google.com/file/d/1UstrCsubQ3sL0itVVMFgmHua-PcYpsna/view?usp=drive_link",
      "https://drive.google.com/file/d/17nY4uMA4-fekHJQ5HZcStB7nnuFxPJHV/view?usp=drive_link",
      "https://drive.google.com/file/d/1ZmqMqC28bFIdWMo_-gsflDukPNhJ3rHF/view?usp=drive_link",
      "https://drive.google.com/file/d/1mqXvBQP8-qBGyZvuLtE5QQWOSLTVAKRQ/view?usp=drive_link",
      "https://drive.google.com/file/d/1mofu1JyBU0Zbh965ip6qq9TdLHSs50Rt/view?usp=drive_link",
      "https://drive.google.com/file/d/1cjj19f2aBnek532BCD6GhudA53N7_Pi2/view?usp=drive_link",
      "https://drive.google.com/file/d/1sOCi9Xzkix6wVgvcLgEd1bopYovquMoM/view?usp=drive_link",
      "https://drive.google.com/file/d/1RZRJgcErJLWALxEc_lw2d_l1e8ggEgqA/view?usp=drive_link",
      "https://drive.google.com/file/d/1Qr5KbjthUQqA7Teqp6ZidDgC8xUU-eb8/view?usp=drive_link",
      "https://drive.google.com/file/d/15SQVdh76DlNct6nRkTDCPv5_EE2En1H3/view?usp=drive_link",
      "https://drive.google.com/file/d/1t_XofV1ZrGnZmFntBf8v6oTgVCCYjqaO/view?usp=drive_link",
      "https://drive.google.com/file/d/1VQ1oNlm5K9kxizqxjppmvGMBablcozAe/view?usp=drive_link",
      "https://drive.google.com/file/d/1NN--juwqPlcnETdIf4h8_mgREvcDXSHp/view?usp=drive_link",
      "https://drive.google.com/file/d/1rdKiU9YFy0E2qJZrapvS4JAP4No24Wg4/view?usp=drive_link",
      "https://drive.google.com/file/d/1zfWYV6xFDjpZxr4gAaWJ0jrhUxTAKdjk/view?usp=drive_link",
      "https://drive.google.com/file/d/1xbyt8Y3Xo51dcRVI5AyuVZXPv9OQ00uL/view?usp=drive_link",
      "https://drive.google.com/file/d/1P4WAqZvK1mwlMUe4voshG3Rve2Jb4FTO/view?usp=drive_link",
      "https://drive.google.com/file/d/1QuF6hBgJBsP8dKL7Uyx7ZL9f79-sswuw/view?usp=drive_link",
      "https://drive.google.com/file/d/11DmFBG5xfk5_Py0ducfAev2UOlHfjhZ-/view?usp=drive_link",
      "https://drive.google.com/file/d/1wLLHAsFYY7ffTSDMpxHKzkdVfX26_nqq/view?usp=drive_link",
      "https://drive.google.com/file/d/1yRuZkdOSEVajwpQw3ZS17arEkNoDtjEd/view?usp=drive_link",
      "https://drive.google.com/file/d/1j7xa2ap7Vfb3t7VMIZA80et6tsQ8qwRr/view?usp=drive_link",
      "https://drive.google.com/file/d/1lyuivnu7RgFZcQK7HAqs1sO6teFVWrH0/view?usp=drive_link",
      "https://drive.google.com/file/d/1U1JKWQ_ocsk1G0nadIqL5B8JqCHGkTfh/view?usp=drive_link",
      "https://drive.google.com/file/d/1vZfkrPWc3OWoW2My_VIHsLgCIgCZRful/view?usp=drive_link",
      "https://drive.google.com/file/d/1jRxqgdjTQuwATzF_DajBrku44ZiF5CKC/view?usp=drive_link",
      "https://drive.google.com/file/d/1Uod6y9lt6roxnx7rMzOMNYMrBOywFGl5/view?usp=drive_link",
      "https://drive.google.com/file/d/1He3a-TR8C8E7tYIAJwy1P_2VOKjw-rtc/view?usp=drive_link",
      "https://drive.google.com/file/d/1BwQa5yxiCTddZs1NqkdjpRKrq5UO2pdp/view?usp=drive_link",
      "https://drive.google.com/file/d/1_KD37FXv2FfvxFAsa5K_nRlwcFxjF387/view?usp=drive_link",
      "https://drive.google.com/file/d/1UF9wJBjkLncKLZCkGqKJVUATfssEeBZy/view?usp=drive_link",
      "https://drive.google.com/file/d/1ToGDKM_yK4NVtjX1qMfy9QeT8PlLQqtV/view?usp=drive_link",
      "https://drive.google.com/file/d/1Dt1XxA7Gpg_JvJIBVZBrVdisQUGwJXXw/view?usp=drive_link",
      "https://drive.google.com/file/d/1np7SzIinxDv0-CkKt5QRSFcuDysV5xIw/view?usp=drive_link",
      "https://drive.google.com/file/d/1SA0pdhUDSYb5FlDmchUJO0NvlGREwUvy/view?usp=drive_link",
      "https://drive.google.com/file/d/14QOpnQO-KTzwpwvhFKZOaTmydyMcVRd9/view?usp=drive_link",
      "https://drive.google.com/file/d/1-gemUGDOLjUOJVd7Fp4v3jngwPtqTiX2/view?usp=drive_link",
      "https://drive.google.com/file/d/1SSMlwX_8XHjJCYTbMfLCzqtEHWuVG2I4/view?usp=drive_link",
      "https://drive.google.com/file/d/1_vktUVEfJIM5Ytr6m4eBHmO-gbfcKF8n/view?usp=drive_link",
      "https://drive.google.com/file/d/1ViaqtF0BiszEG99l4ogCJmd34Ms2A8BC/view?usp=drive_link",
      "https://drive.google.com/file/d/142uoO5VgowIEf-xsAcL-HJniUKOACM9J/view?usp=drive_link",
      "https://drive.google.com/file/d/1vptO2vEjYhpe44NUIROVw_gZDP-AbrcW/view?usp=drive_link",
      "https://drive.google.com/file/d/1bBLunBnQvfMRIJP0qT-NXeHj--hOnAcp/view?usp=drive_link",
      "https://drive.google.com/file/d/1z6gwp212mLRwsv8EkQDcLApBxYEAs_0s/view?usp=drive_link",
      "https://drive.google.com/file/d/1uRXOrZSWt0Xoaj2WURiv3LNsIXuClYw7/view?usp=drive_link",
      "https://drive.google.com/file/d/1o26-ePK1swK5sgu2Dcv1HbZiN2GOJze4/view?usp=drive_link",
      "https://drive.google.com/file/d/1sAjkKMzkcw87c7zEog1didZ0Wnm_57aL/view?usp=drive_link",
      "https://drive.google.com/file/d/1tLm-LoP1faovkN91xeDVAWn_Rc4wCKlq/view?usp=drive_link",
      "https://drive.google.com/file/d/14XMDBPpPZZJMQdj_ztxgldi8jZq4cw1U/view?usp=drive_link",
      "https://drive.google.com/file/d/1HdBAXe_FtwDx-NxAIT_U1_qYwsT8enrj/view?usp=drive_link",
      "https://drive.google.com/file/d/10AI6ZjFB_4biI4spSWFAG0UTjaC21zEU/view?usp=drive_link",
      "https://drive.google.com/file/d/1gM1vZxsLjIMb2Rp7L061TCZLDISHhcyk/view?usp=drive_link",
      "https://drive.google.com/file/d/1EK_H0QYH9KtDh-2K-5jeZsNlaj_PnSa4/view?usp=drive_link",
      "https://drive.google.com/file/d/1aXqHcs6W628YGoXVjvQQ9fblPMVaIiNF/view?usp=drive_link",
      "https://drive.google.com/file/d/1ehALHZ_xGBVIdMs_rIh22FlaAM_b6avC/view?usp=drive_link",
      "https://drive.google.com/file/d/1pIpUr0fVSfq4fJqC-frZFc5g5VtmW-rw/view?usp=drive_link",
      "https://drive.google.com/file/d/1QNQjz0W5GqfuC0KJ642VSXzCGLd7aox-/view?usp=drive_link",
      "https://drive.google.com/file/d/1AwsoK8AkvKe7-317S6Hy6USBfySlM70H/view?usp=drive_link",
      "https://drive.google.com/file/d/17EQJpNF-6JDtF0JBY8e12i_FRNJ-pBB4/view?usp=drive_link",
      "https://drive.google.com/file/d/1YfGmlCrh15O90u4OYtpOjt2Tq9JNfC57/view?usp=drive_link",
      "https://drive.google.com/file/d/1PaZNRKcMQmecIpaNiTqEFGz72ECKxiUH/view?usp=drive_link",
      "https://drive.google.com/file/d/1NwuwjrxUBB6bvUqUc0i81oiWyEAYSxTy/view?usp=drive_link",
      "https://drive.google.com/file/d/1vbuzAQtRgI2DCVCLA48q_0gddpz0qEaz/view?usp=drive_link",
      "https://drive.google.com/file/d/1HFP_Nxg_-M1aWLfSHDSwDtCtDW-D1pWq/view?usp=drive_link",
      "https://drive.google.com/file/d/1NKa97ucL8Gdn6VQuP3GgQbJ_STWi_8mp/view?usp=drive_link",
      "https://drive.google.com/file/d/100s3o6ZfNaaklf_GtV_UcN2hQegPSqES/view?usp=drive_link",
      "https://drive.google.com/file/d/1rNu5FngHGSs7HseMpWKIYvqc2dj1fapT/view?usp=drive_link",
      "https://drive.google.com/file/d/1H6eI0vBwm_2KeBsDeQHIYLJi2eLxOT9J/view?usp=drive_link",
      "https://drive.google.com/file/d/1rU8ruFzIHkIoT-mB4Y6lC1I95nnAsvlP/view?usp=drive_link",
      "https://drive.google.com/file/d/1Oh-VkfpUhOLZ-7a-nqAEzreCvFvssSKr/view?usp=drive_link",
      "https://drive.google.com/file/d/18R8NX0sWH_cMRb_oDiUXHzpj6WjB-14U/view?usp=drive_link",
      "https://drive.google.com/file/d/1nUynAV67iqO99hJSmGWj1y2DIjFUgPz4/view?usp=drive_link",
      "https://drive.google.com/file/d/1PwVduEHepBwwF3KNXBQh249AuN22K_a1/view?usp=drive_link",
      "https://drive.google.com/file/d/1RaOcetvgTO9o6-XE3jaYZA8byq3J8MHl/view?usp=drive_link",
      "https://drive.google.com/file/d/1d9B-8GPgmmFgCLFs-A7w5b1dWGaefcec/view?usp=drive_link",
      "https://drive.google.com/file/d/1qU9tuspcgeheh6RT2JNKhZG1QFnswhH7/view?usp=drive_link",
      "https://drive.google.com/file/d/1o_VJCkrJCTxqegk26FxPU1ZcSlVjbpYm/view?usp=drive_link",
      "https://drive.google.com/file/d/1HpnF56Pw-MZnTqpL1jqE_9kBzuhrvyTH/view?usp=drive_link",
      "https://drive.google.com/file/d/11NVD6zC3hBGQkX8yP7OVxMw5muG1IAnz/view?usp=drive_link",
      "https://drive.google.com/file/d/1fMXwKO0no_dE5nvjuzUoTDDs5tw_Qf-I/view?usp=drive_link",
      "https://drive.google.com/file/d/1crA3kY21fB6pOv0Pa3fwBL1CyBxPF9h6/view?usp=drive_link",
      "https://drive.google.com/file/d/1fMcnHEld_TXiEG_i3LQ-4dt7sSLwakWR/view?usp=drive_link",
      "https://drive.google.com/file/d/1H5JoTXKYTgaAHzlCvZnrG1pXWwk4XnUB/view?usp=drive_link",
      "https://drive.google.com/file/d/1BrKuK7Crz1hQrND2ebWGAGDPBlMFiD96/view?usp=drive_link",
      "https://drive.google.com/file/d/1MQbpdwTaspOtT_1Uxxcue9h4qHXNAlbc/view?usp=drive_link",
      "https://drive.google.com/file/d/1KORMxI30bKF_8qxsv5WQ3Z-iP18piEZ1/view?usp=drive_link",
      "https://drive.google.com/file/d/1yRhRYapHK61kvU0uukYXaIFkBwQ2ecB3/view?usp=drive_link",
      "https://drive.google.com/file/d/18vtQZn5rcmlIZNOPgDuKUmAs083BdzxI/view?usp=drive_link",
      "https://drive.google.com/file/d/1Ql7IhoMg8_v6n-HyI7nifsJzfeCkQiMn/view?usp=drive_link",
      "https://drive.google.com/file/d/14Bxm6xP2T-fvgEmCmJQpTg4n7jmxXRXl/view?usp=drive_link",
      "https://drive.google.com/file/d/1Fh0FcJCqmliXYG5R6rLZ1b1dKVxUUnug/view?usp=drive_link",
      "https://drive.google.com/file/d/1IhGUTGKQDrZ3nbUGJxzUZNkAMt9L6ERz/view?usp=drive_link",
      "https://drive.google.com/file/d/1nPOvgsnTamQTmPV07IrzM2lH2qRkPbVD/view?usp=drive_link",
      "https://drive.google.com/file/d/1LcFvj4ootOcTd93RIYQoAP7Zf843IrSa/view?usp=drive_link",
      "https://drive.google.com/file/d/1PDIo6UzOyVYCt0i7MsANF4fMISMMtcbi/view?usp=drive_link",
      "https://drive.google.com/file/d/19OVQgSetAnNfgvlBC95NxagCG_ovRRoB/view?usp=drive_link",
      "https://drive.google.com/file/d/1KKjEF2HVm2ZD3AbKAUXmfaAoklbgAjpX/view?usp=drive_link",
      "https://drive.google.com/file/d/1mLatkkCKBSxE4XrOTylXWJaXTrwcW1g0/view?usp=drive_link",
      "https://drive.google.com/file/d/1TVh7_eOhYWHrpaPKuDf-_E57kYDtOfJ6/view?usp=drive_link",
      "https://drive.google.com/file/d/1opXNjLjW6Ur0bbJcui0FNXdzCOfIo-xe/view?usp=drive_link",
      "https://drive.google.com/file/d/1axU-VKfAgk42-KCyK8coJ_Sxn1tBz5yg/view?usp=drive_link",
      "https://drive.google.com/file/d/1iAUMkc6GmKfl6ywtVLRx5B4DLr_dnG4P/view?usp=drive_link",
      "https://drive.google.com/file/d/1KfQk6_eUe7kcGe854YkBlsiIRnGJdy5O/view?usp=drive_link",
      "https://drive.google.com/file/d/1fs4nNstcbe9iT-nswU8swyvx0fkfvMpV/view?usp=drive_link",
      "https://drive.google.com/file/d/1evlETqZysTAC4nlhBFYVbfHnHXDZ2VDv/view?usp=drive_link",
      "https://drive.google.com/file/d/1pCcnpikLeOZivsc3vmLqC4SU5iViqFq0/view?usp=drive_link",
      "https://drive.google.com/file/d/1FBodZbw3Z4WNGp2OccFFz0ZPx6bLUMmi/view?usp=drive_link",
      "https://drive.google.com/file/d/1xGZKctT-hMSxYEJMl6O4fKAcU2SXhj7T/view?usp=drive_link",
      "https://drive.google.com/file/d/1JMpv9DXr3v7Grz6Edljks7Fw4Nypc8n6/view?usp=drive_link",
      "https://drive.google.com/file/d/1dAYsDKptVBqBQp2ia0F4fKEIQsftFTay/view?usp=drive_link",
      "https://drive.google.com/file/d/1KWgiwhA7G3ABPSdMmQTMbM1xIOcBaZ22/view?usp=drive_link",
      "https://drive.google.com/file/d/1smv7HxHGK-dERv8NUrQXI0HDDGtC6SLX/view?usp=drive_link",
      "https://drive.google.com/file/d/1xG1RbCNHW8_CpDITq-0Vy34de_I3WvEH/view?usp=drive_link",
      "https://drive.google.com/file/d/14nwZXs0K8hZ-N3cPqA_s7h2LwuJ3E97L/view?usp=drive_link",
      "https://drive.google.com/file/d/1I2fZ2tjSwUpWu_XY-jFkkZO1te50lhnB/view?usp=drive_link",
      "https://drive.google.com/file/d/1svar3K13Lvo77xZpyf1ic18E7SI3tRSx/view?usp=drive_link",
      "https://drive.google.com/file/d/150jmr7lW7R9auMofgWejHUb-AOj2mztN/view?usp=drive_link",
      "https://drive.google.com/file/d/1PxSkTH3lds16f0FTuUZ_conp2kfKE4Dq/view?usp=drive_link",
      "https://drive.google.com/file/d/1Qc5FKk3fMxOTNIoaDlXQV27nXBGxKSsU/view?usp=drive_link",
      "https://drive.google.com/file/d/16jwGI-l3VXWQ4yzuoAOvHEunM28thFEN/view?usp=drive_link",
      "https://drive.google.com/file/d/1Bly1MlaUqBNOMRkVo-atvbIsYCLfG4rP/view?usp=drive_link",
      "https://drive.google.com/file/d/1gEp3i-vY1zg83WO6p9szZE-dqtHfXhR-/view?usp=drive_link",
      "https://drive.google.com/file/d/105dDlDlI0sYVULQYx-QiRSCXmdrv_quo/view?usp=drive_link",
      "https://drive.google.com/file/d/1W6CMp4ebov7f401Ubx1zFElQIFzQeti_/view?usp=drive_link",
      "https://drive.google.com/file/d/128SZMwd1QfbLDFG-YF4XDlRE_DdOnCPX/view?usp=drive_link",
      "https://drive.google.com/file/d/160EUrHi_Rbo-lCzftjZY3A4GQxIXcJbX/view?usp=drive_link",
      "https://drive.google.com/file/d/1wcuryZCsjOU9AZ9PxfNKcu6vk4rvjPGH/view?usp=drive_link",
      "https://drive.google.com/file/d/1821sKOD-BRYwEgWZdt7rbgw_rd-Ytkve/view?usp=drive_link",
      "https://drive.google.com/file/d/1gFGv41xLHXnV1jkekku-KsL1BkjqTgvp/view?usp=drive_link",
      "https://drive.google.com/file/d/1DBHfkinACTFHsdKFGErCEHS13CkkBBpe/view?usp=drive_link",
      "https://drive.google.com/file/d/1fTfJ7CxS1MQ8jnj0xZkQ1ZSBnf9NnaKB/view?usp=drive_link",
      "https://drive.google.com/file/d/13M7mFXsyMjjFenhLyRM3kWo_Ia1kTuib/view?usp=drive_link",
      "https://drive.google.com/file/d/143vKeC0x71dBFLbieQhye0oIMNIQRSaK/view?usp=drive_link",
      "https://drive.google.com/file/d/1BGehYJk1Z3I6qrRqQCsqy8JisYczDMzb/view?usp=drive_link",
      "https://drive.google.com/file/d/1LcL1Bw0k2PLTWU1RBBJ19tBtfknvdnLd/view?usp=drive_link",
      "https://drive.google.com/file/d/1TG5qIl1q_W_-q9i9qgmYAOHtfknMTEwI/view?usp=drive_link",
      "https://drive.google.com/file/d/117tdn1ZUWTzLjVu-oAimTnF6fzYfWHYF/view?usp=drive_link",
      "https://drive.google.com/file/d/1GwQPHclKITjYXvYDfcwxU_tYpQ5Wzmw7/view?usp=drive_link",
      "https://drive.google.com/file/d/1-mqrIF4sXc3h7uN0h0LRLZOzv5VkyGpK/view?usp=drive_link",
      "https://drive.google.com/file/d/1BKzfChDdv4dnW_JLZVizPW8jLYcKAJ8i/view?usp=drive_link",
      "https://drive.google.com/file/d/1KwfeaDJp-65_-AWePsgnfY0M2jXDNdxY/view?usp=drive_link",
      "https://drive.google.com/file/d/1vThpq4IJMFUEzDvUm152U8rGwPiVDsyW/view?usp=drive_link",
      "https://drive.google.com/file/d/1PTW_p754mARzV7L1u7ehA4ld8syjNkXq/view?usp=drive_link",
      "https://drive.google.com/file/d/1JG9nS9iG1KxZfqFSAHT8xAtFEsgCxwhg/view?usp=drive_link",
      "https://drive.google.com/file/d/1uLSCFVhSQD5wq-WstdX96GS291LaGGtY/view?usp=drive_link",
      "https://drive.google.com/file/d/1fIRv0OO6OXQ1Z3uz6Tjjhy2Cs4CjmaEz/view?usp=drive_link",
      "https://drive.google.com/file/d/1k3jaQ5MoU3cqUsz4X9IrRZpxElwgsd7h/view?usp=drive_link",
      "https://drive.google.com/file/d/1DOOerAmZQeNLe1Jqz9NyYpxndmQyp0Sp/view?usp=drive_link",
      "https://drive.google.com/file/d/1f887MnAHYoldh2xWEVqvK_iLK5UX8WzL/view?usp=drive_link",
      "https://drive.google.com/file/d/1gsRlZdxdW8lwqmMGOU0yiTgIzxr6Qib6/view?usp=drive_link",
      "https://drive.google.com/file/d/1lEFu0GbfGItPA_vE1vj10w1lkWsCneaD/view?usp=drive_link",
      "https://drive.google.com/file/d/1QdAgTPZWCVKohEME6V95yL5VOb3YLQoq/view?usp=drive_link",
      "https://drive.google.com/file/d/1S_YTCruqpc7UPT4eKXAS4ixb9_o2WcuK/view?usp=drive_link",
      "https://drive.google.com/file/d/1wIqEjolIQSOsXkkZZNkckMKUV6HFi9vu/view?usp=drive_link",
      "https://drive.google.com/file/d/1ZZX2cgpxabJceQgX0b3tM7yBP-oaeOh9/view?usp=drive_link",
      "https://drive.google.com/file/d/1elw4osS-Xn0lqy6gZlk_fbMDoAigPJMj/view?usp=drive_link",
      "https://drive.google.com/file/d/1DI1jomqISKMTkY7s6rgc9pNgNcIrbyxx/view?usp=drive_link",
      "https://drive.google.com/file/d/1I92aAlUZYbySOS2I1vvKbs3dBgaeTLng/view?usp=drive_link",
      "https://drive.google.com/file/d/1XJ_u_J2rslbKbDcs2ysq99_sXAHOa9zJ/view?usp=drive_link",
      "https://drive.google.com/file/d/1rboDD4Fki6XOi0PWmEgP6WYSnkSLMhMy/view?usp=drive_link",
      "https://drive.google.com/file/d/1xQDe3vGxDCE6bLf6WhDReaKDvgbKLKv8/view?usp=drive_link"
    ];

    const entries = rawLinks
      .map((url) => {
        const match = url.match(/\/d\/([^/]+)\//);
        if (!match) return null;
        const id = match[1];
        return {
          id,
          thumb: `https://drive.google.com/thumbnail?id=${id}&sz=w512`,
          fallback: `https://drive.google.com/uc?export=download&id=${id}`,
          full: `https://drive.google.com/uc?export=view&id=${id}`,
        };
      })
      .filter(Boolean);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 1, 5000);
    camera.position.set(0, 0, 900);

    const renderer = new CSS3DRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.domElement.style.position = 'fixed';
    renderer.domElement.style.inset = '0';
    const sceneContainer = document.getElementById('scene-container');
    sceneContainer.appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableRotate = true;
    controls.enableDamping = true;
    controls.dampingFactor = 0.08;
    controls.enablePan = true;
    controls.screenSpacePanning = true;
    controls.enableZoom = true;
    controls.autoRotate = true;
    controls.autoRotateSpeed = 0.5;
    controls.zoomSpeed = 1.1;
    controls.panSpeed = 0.65;
    controls.minDistance = 480;
    controls.maxDistance = 2600;
    controls.target.set(0, 0, 0);
    controls.update();

    const tiles = [];
    const spherical = new THREE.Spherical();

    const floatParams = entries.map(() => ({
      offset: Math.random() * Math.PI * 2,
      speed: 0.22 + Math.random() * 0.22,
      amp: 6 + Math.random() * 6,
      hovered: false,
      current: 0,
      hires: false,
    }));

    const basePositions = [];

    const goldenAngle = Math.PI * (3 - Math.sqrt(5));
    const baseRadius = 2100;

    entries.forEach((entry, idx) => {
      const div = document.createElement('div');
      div.className = 'tile';

      const img = document.createElement('img');
      img.alt = 'Artwork';
      img.loading = 'lazy';
      img.referrerPolicy = 'no-referrer';
      img.src = entry.thumb;

      img.onerror = () => {
        img.src = entry.fallback;
      };

      img.onload = () => {
        img.style.filter = 'saturate(1)';
        img.style.opacity = '1';
        div.classList.add('loaded');
      };

      div.appendChild(img);

      const obj = new CSS3DObject(div);
      const y = 1 - (idx / entries.length) * 2 + (Math.random() - 0.5) * 0.08;
      const radiusJitter = baseRadius + (Math.random() - 0.5) * 120;
      const theta = goldenAngle * idx + (Math.random() - 0.5) * 0.06;
      const r = Math.sqrt(1 - y * y);
      const x = Math.cos(theta) * r;
      const z = Math.sin(theta) * r;
      obj.position.set(x * radiusJitter, y * radiusJitter, z * radiusJitter);

      obj.lookAt(camera.position);
      obj.userData = { entry, idx };

      basePositions.push(obj.position.clone());

      div.addEventListener('mouseenter', () => (floatParams[idx].hovered = true));
      div.addEventListener('mouseleave', () => (floatParams[idx].hovered = false));
      div.addEventListener('click', () => launchToViewer(obj, entry, idx));

      scene.add(obj);
      tiles.push(obj);
    });

    const viewer = document.getElementById('viewer');
    const viewerImg = viewer.querySelector('img');
    viewerImg.referrerPolicy = 'no-referrer';
    const closeBtn = viewer.querySelector('.close');
    function openViewer(primary, alternate) {
      viewerImg.style.opacity = '0';
      viewerImg.dataset.fallback = alternate;
      viewerImg.src = primary;
      viewer.classList.add('active');
    }

    function launchToViewer(obj, entry, idx) {
      const rect = obj.element.getBoundingClientRect();
      const overlay = document.createElement('div');
      overlay.className = 'launch-preview';
      overlay.style.width = `${rect.width}px`;
      overlay.style.height = `${rect.height}px`;
      overlay.style.left = `${rect.left}px`;
      overlay.style.top = `${rect.top}px`;
      const img = obj.element.querySelector('img');
      overlay.style.backgroundImage = `url(${img.src})`;
      overlay.style.transform = 'translate(0px, 0px) scale(1)';
      document.body.appendChild(overlay);

      const targetSize = Math.min(window.innerWidth * 0.72, 960);
      const targetX = (window.innerWidth - targetSize) / 2;
      const targetY = (window.innerHeight - targetSize) / 2;
      const dx = targetX - rect.left;
      const dy = targetY - rect.top;
      const scale = targetSize / rect.width;

      requestAnimationFrame(() => {
        overlay.style.transform = `translate(${dx}px, ${dy}px) scale(${scale})`;
      });

      setTimeout(() => {
        openViewer(entry.fallback, entry.full);
        overlay.style.opacity = '0';
        setTimeout(() => overlay.remove(), 200);
      }, 520);
    }
    function closeViewer() {
      viewer.classList.remove('active');
      viewerImg.src = '';
    }
    viewerImg.onload = () => {
      viewerImg.style.opacity = '1';
    };
    viewerImg.onerror = () => {
      if (viewerImg.dataset.fallback && viewerImg.src !== viewerImg.dataset.fallback) {
        viewerImg.src = viewerImg.dataset.fallback;
      }
    };
    closeBtn.addEventListener('click', closeViewer);
    viewer.addEventListener('click', (e) => {
      if (e.target === viewer) closeViewer();
    });
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeViewer();
    });

    function upgradeTile(i) {
      const state = floatParams[i];
      if (state.hires) return;
      const img = tiles[i].element.querySelector('img');
      const target = entries[i].fallback;
      if (img.src === target) {
        state.hires = true;
        return;
      }
      const swapIn = new Image();
      swapIn.referrerPolicy = 'no-referrer';
      swapIn.src = target;
      swapIn.onload = () => {
        state.hires = true;
        img.style.opacity = '0.35';
        requestAnimationFrame(() => {
          img.src = target;
          requestAnimationFrame(() => {
            img.style.opacity = '1';
          });
        });
      };
    }

    const forward = new THREE.Vector3();
    const toTile = new THREE.Vector3();
    const clock = new THREE.Clock();

    function animate() {
      requestAnimationFrame(animate);
      const t = clock.getElapsedTime();
      camera.getWorldDirection(forward);
      tiles.forEach((tile, i) => {
        const data = floatParams[i];
        const wobbleTarget = data.hovered
          ? 0
          : Math.sin(t * data.speed + data.offset) * data.amp;
        data.current += (wobbleTarget - data.current) * 0.08;
        const base = basePositions[i];
        tile.position.set(base.x, base.y, base.z + data.current);
        tile.lookAt(camera.position);

        const dist = camera.position.distanceTo(tile.position);
        toTile.copy(tile.position).sub(camera.position).normalize();
        const facingScore = forward.dot(toTile);

        if (tile.element.classList.contains('loaded')) {
          const fade = THREE.MathUtils.clamp((facingScore + 0.45) / 1.4, 0.18, 1);
          tile.element.style.opacity = fade.toFixed(3);
        }

        if (facingScore > 0.95 && dist < 2300) {
          upgradeTile(i);
        }
      });
      controls.update();
      renderer.render(scene, camera);
    }

    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    const loading = document.querySelector('.loading');
    Promise.all(
      entries.slice(0, 12).map(
        (entry) =>
          new Promise((resolve) => {
            const img = new Image();
            img.src = entry.thumb;
            img.onload = img.onerror = () => resolve();
          })
      )
    ).finally(() => {
      loading.classList.add('done');
      setTimeout(() => loading.remove(), 500);
    });
  </script>
</body>
</html>
